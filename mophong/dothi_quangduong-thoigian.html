<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Äá»’ THá»Š QUÃƒNG ÄÆ¯á»œNG - THá»œI GIAN</title>
  <link rel="stylesheet" href="dothi_quangduong-thoigian.css" />
</head>
<body>
  <div class="container">
    <div class="flex-layout">
      <!-- Cá»˜T TRÃI: Báº¢NG NHáº¬P LIá»†U -->
      <div class="input-panel">
<h3 class="panel-title">Báº¢NG Sá» LIá»†U QUÃƒNG ÄÆ¯á»œNG - THá»œI GIAN</h3>
        <table id="dataTable">
          <thead>
            <tr>
              <th>
                Thá»i gian<br>
                <select id="timeUnit">
                  <option value="1">giÃ¢y</option>
                  <option value="60">phÃºt</option>
                  <option value="3600" selected>giá»</option>
                </select>
              </th>
              <th>
                QuÃ£ng Ä‘Æ°á»ng<br>
                <select id="distanceUnit">
                  <option value="0.001" selected>km</option>
                  <option value="1">m</option>
                  <option value="100">cm</option>
                  <option value="1000">mm</option>
                </select>
              </th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr><td><input type="number" class="time-input" value="0" step="0.1"></td><td><input type="number" class="distance-input" value="0" step="1"></td><td><button class="remove-row">ğŸ—‘</button></td></tr>
            <tr><td><input type="number" class="time-input" value="0.5" step="0.1"></td><td><input type="number" class="distance-input" value="15" step="1"></td><td><button class="remove-row">ğŸ—‘</button></td></tr>
            <tr><td><input type="number" class="time-input" value="1" step="0.1"></td><td><input type="number" class="distance-input" value="30" step="1"></td><td><button class="remove-row">ğŸ—‘</button></td></tr>
            <tr><td><input type="number" class="time-input" value="1.5" step="0.1"></td><td><input type="number" class="distance-input" value="45" step="1"></td><td><button class="remove-row">ğŸ—‘</button></td></tr>
            <tr><td><input type="number" class="time-input" value="2" step="0.1"></td><td><input type="number" class="distance-input" value="60" step="1"></td><td><button class="remove-row">ğŸ—‘</button></td></tr>
          </tbody>
        </table>

        <div style="margin-top: 8px;">
          <button id="addRowBtn">ThÃªm dÃ²ng</button>
          <button id="drawGraphBtn">Váº½ Ä‘á»“ thá»‹</button>
          <button id="analyzeBtn">PhÃ¢n tÃ­ch Ä‘á»“ thá»‹</button>
        </div>
      </div>

      <!-- Cá»˜T PHáº¢I: BIá»‚U Äá»’ -->
      <div class="chart-panel">
<h3 class="panel-title">Äá»’ THá»Š QUÃƒNG ÄÆ¯á»œNG - THá»œI GIAN</h3>
        <canvas id="myChart"></canvas>
<!-- PHÃ‚N TÃCH Äá»’ THá»Š -->
  <div id="analysisContainer" class="analysis-box" style="display: none;">
  <span class="close-analysis">Ã—</span>
  <h3>PhÃ¢n tÃ­ch Ä‘á»“ thá»‹</h3>
  <div id="analysisResult">Äang phÃ¢n tÃ­ch...</div>
</div>

    </div>
  </div>
 
  </div>

  <script src="chart.umd.min.js"></script>
  <script src="dothi_quangduong-thoigian.js"></script>
  <script>
  const analysisBox = document.getElementById('analysisContainer');
const closeBtn = document.querySelector('.close-analysis');

  const analyzeBtn = document.getElementById('analyzeBtn');
  const resultBox = document.getElementById('analysisResult');

  analyzeBtn.onclick = function () {
    const timeInputs = Array.from(document.querySelectorAll('.time-input'));
    const distanceInputs = Array.from(document.querySelectorAll('.distance-input'));
    const timeUnitLabel = document.getElementById('timeUnit').selectedOptions[0].textContent.trim();
    const distanceUnitLabel = document.getElementById('distanceUnit').selectedOptions[0].textContent.trim();

    const times = timeInputs.map(input => parseFloat(input.value));
    const distances = distanceInputs.map(input => parseFloat(input.value));

    let content = '';

    if (times.length < 2) {
      content = '<strong>Cáº§n Ã­t nháº¥t hai Ä‘iá»ƒm dá»¯ liá»‡u Ä‘á»ƒ phÃ¢n tÃ­ch.</strong>';
    } else {
      let isUniform = true;
      const speeds = [];

      for (let i = 1; i < times.length; i++) {
        const dt = times[i] - times[i - 1];
        const ds = distances[i] - distances[i - 1];
        const v = dt !== 0 ? ds / dt : 0;
        speeds.push(v);
        if (i > 1 && Math.abs(v - speeds[i - 2]) > 0.1) isUniform = false;
      }

      const summary = isUniform
        ? 'âœ… <strong>Váº­t chuyá»ƒn Ä‘á»™ng Ä‘á»u</strong> vÃ¬ váº­n tá»‘c giá»¯a cÃ¡c khoáº£ng thá»i gian lÃ  khÃ´ng Ä‘á»•i.'
        : 'âš ï¸ <strong>Váº­t chuyá»ƒn Ä‘á»™ng khÃ´ng Ä‘á»u</strong> vÃ¬ váº­n tá»‘c thay Ä‘á»•i giá»¯a cÃ¡c khoáº£ng thá»i gian.';

      content += `<p>${summary}</p>`;
      content += '<br><strong>Chi tiáº¿t cÃ¡c khoáº£ng:</strong><ul style="list-style: disc; padding-left: 18px;">';

      for (let i = 1; i < times.length; i++) {
        const t1 = times[i - 1], t2 = times[i];
        const s1 = distances[i - 1], s2 = distances[i];
        const dtRaw = t2 - t1;
        const dsRaw = s2 - s1;
        const vRaw = dtRaw !== 0 ? dsRaw / dtRaw : 0;

        const dt = parseFloat(dtRaw.toFixed(1));
        const ds = parseFloat(dsRaw.toFixed(1));
        const v = parseFloat(vRaw.toFixed(2));

        const standingStill = Math.abs(v) < 0.0001;
        const note = standingStill ? ' <strong>(Váº­t Ä‘á»©ng yÃªn)</strong>' : '';

        const line = `Tá»« t=${t1} Ä‘áº¿n t=${t2} ${timeUnitLabel}, Î”t=${dt} ${timeUnitLabel}, Î”s=${s2} - ${s1} = ${ds} ${distanceUnitLabel}, v = Î”s / Î”t = ${ds} / ${dt} = <strong>${v.toFixed(2)}</strong> ${distanceUnitLabel}/${timeUnitLabel}${note}`;
        content += `<li>${line}</li>`;
      }

      content += '</ul>';
    }

    resultBox.innerHTML = content;
    analysisBox.style.display = 'block';

  };

  closeBtn.onclick = function () {
    analysisBox.style.display = 'none';

  };
</script>

</body>
</html>
