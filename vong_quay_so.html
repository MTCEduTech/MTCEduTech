<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
<script src="auth.js"></script>
  <title>V√≤ng Quay May M·∫Øn k·∫øt h·ª£p Th·ªùi Gian ƒê·∫øm Ng∆∞·ª£c</title>
  <style>
    body {
      font-family: 'Times New Roman', sans-serif;
     background-image: url('Nen.jpg');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
  background-attachment: fixed;
}

      padding-top: 5px;
    }

    h1 {
      text-align: center;
    }

    #main-layout {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 40px;
      margin-bottom: 30px;
    }

    #result-box, #custom-input {
      width: 250px;
      min-height: 100px;
      background: #ffffff;
      border: 2px solid #ccc;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    #result-box {
      color: #e91e63;
      font-weight: bold;
      font-size: 20px;
    }

    #wheel-container {
      position: relative;
      width: 400px;
      height: 400px;
    }

    canvas {
      border: 5px solid #009688;
      border-radius: 50%;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
    }

    #center-logo {
      width: 300px;
      height: 300px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2;
      cursor: pointer;
      border-radius: 50%;
      object-fit: cover;
    }

    #pointer {
      width: 0;
      height: 0;
      border-top: 15px solid transparent;
      border-bottom: 15px solid transparent;
      border-left: 25px solid red;
      position: absolute;
      top: 50%;
      right: -20px;
      transform: translateY(-50%) rotate(180deg);
      z-index: 3;
    }

    button {
      padding: 10px 20px;
      font-size: 18px;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin: 10px 5px;
    }

       table {
      border-collapse: collapse;
      font-size: 18px;
      color: #FFD700;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 5px;
    }
#startButton {
  background-color: #ff5722; /* m√†u cam n·ªïi b·∫≠t */
  color: white;
  font-weight: bold;
  font-size: 18px;
  border: none;
  padding: 12px 24px;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

#startButton:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
}
#info-box {
  text-align: justify;	// Canh ƒë·ªÅu ch·ªØ trong √¥ m·ªü ra d·ªÖ ƒë·ªçc
}

  .btn-play {
      background-color: #28a745; /* Xanh l√° c√¢y */
    }
    .btn-all {
      background-color: #007bff; /* Xanh d∆∞∆°ng */
    }
    .btn-shuffle {
      background-color: #fd7e14; /* Cam */
    }
   
  </style>
  

<style>
    button {
        font-size: 13px;
        padding: 5px 10px;
        margin: 4px;
        border-radius: 6px;
    }
</style>
</head>
<body>
<marquee direction="left" scrollamount="8" style="color:white; font-weight:bold; font-size: 20px; margin: 0px 0;">H∆Ø·ªûNG ·ª®NG CHUY·ªÇN ƒê·ªîI S·ªê TRONG NG√ÄNH GI√ÅO D·ª§C - M·ªñI GI√ÅO VI√äN V√Ä M·ªñI NG∆Ø·ªúI L√ÄM TRONG NG√ÄNH GI√ÅO D·ª§C M·ªòT ƒê√ìNG G√ìP, T√åM KI·∫æM V√Ä PH√ÅT HUY C√ÅC C√îNG NGH·ªÜ H·ªñ TR·ª¢ TRONG C√îNG T√ÅC D·∫†Y V√Ä H·ªåC HI·ªÜU QU·∫¢; S·∫¢N PH·∫®M N√ÄY L√Ä C√îNG C·ª§ ·ª®NG D·ª§NG V√ÄO GI·∫¢NG D·∫†Y, ƒê∆Ø·ª¢C VI·∫æT NH·ªú S·ª∞ H·ªñ TR·ª¢ C·ª¶A AI</marquee>
<center><span style="font-size: 32px; font-weight: bold; color: #e91e63;">üéâ V√íNG QUAY MAY M·∫ÆN (NH·∫¨P S·ªê) & TH·ªúI GIAN ƒê·∫æM NG∆Ø·ª¢C üéâ</span><br/>
  <span style="font-size: 16px; color: yellow;">
    <em><strong>T√°c gi·∫£:</strong></em> Mai Thi·ªán Ch√°nh ‚Äì
    <em>ƒê∆°n v·ªã c√¥ng t√°c:</em> Tr∆∞·ªùng THCS ƒê·ª©c Ph√∫, x√£ Ngh·ªã ƒê·ª©c, t·ªânh L√¢m ƒê·ªìng
  </span><center/><br/>

<div id="main-layout">
  <div id="custom-input"; >

<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 2px; margin-bottom: 10px;">    
<center><label><strong>Nh·∫≠p s·ªë l∆∞·ª£ng ng∆∞·ªùi tham gia (Kh√¥ng nh·∫≠p qu√° s·ªë 100) <br/></strong></label>
    <input type="number" id="number-count" min="1" max="100" onchange="generateItemsFromCount()" />
    <button onclick="resetAll()" style="background-color:#f44336;">RESET</button>
   <button onclick="showInstructions()">H∆Ø·ªöNG D·∫™N</button>
  <button onclick="showContact()">TH√îNG TIN T√ÅC GI·∫¢</button>
</div>

<div id="info-box" style="margin-top: 10px; display: none; background-color: #e3f2fd; padding: 15px; border-radius: 10px; border: 1px solid #90caf9;">
</div>
<h2 style="color: #0056b3;">NGHE NH·∫†C
  <!-- Danh s√°ch b√†i h√°t d·∫°ng x·ªï xu·ªëng -->
  <select id="playlist" style="width: 200px;">
<option>Vui l√≤ng ch·ªçn b√†i nh·∫°c</option>
    <option value="You're My Heart, You're My Soul.mp3">1. You're My Heart, You're My Soul</option>
    <option value="Tuesday Night.mp3">2. Tuesday Night</option>
    <option value="Khong loi_Phat thuong1.mp3">3. Kh√¥ng l·ªùi - Ph√°t th∆∞·ªüng 01</option>
    <option value="Khong loi_Phat thuong2.mp3">4. Kh√¥ng l·ªùi - Ph√°t th∆∞·ªüng 02</option>
    <option value="Rhapsody - A Future In The Void.mp3">5. Rhapsody - A Future In The Void</option>
    <option value="Maxim Novak - Shy Girl.mp3">6. Maxim Novak - Shy Girl</option>
    <option value="GANGNAM.mp3">7. Gangnam Style</option>
    <option value="conduongdentruong.mp3">8. Con ƒë∆∞·ªùng ƒë·∫øn tr∆∞·ªùng</option>
    <option value="ToQuocGoiTenMinh.mp3">9. T·ªï qu·ªëc g·ªçi t√™n m√¨nh</option>
    <option value="4 Bon phuong troi.mp3">10. B·ªën Ph∆∞∆°ng tr·ªùi</option>
    <option value="Hoatau_guitar_dien.mp3">11. H√≤a t·∫•u Guitar ƒëi·ªán (7 ph√∫t)</option>
  </select>
  <!-- C√°c n√∫t ƒëi·ªÅu khi·ªÉn -->
  <button class="btn-play" onclick="playSelected()">PLAY</button>
  <button class="btn-shuffle" onclick="playAll(true)">PH√ÅT X√ÅO TR·ªòN</button>
<br>
  <!-- Thanh ƒëi·ªÅu ch·ªânh √¢m l∆∞·ª£ng -->
  √Çm l∆∞·ª£ng:
  <input type="range" id="volume" min="0" max="1" step="0.01" value="1">

  <!-- Tr√¨nh ph√°t audio -->
  <audio id="audioPlayer" controls style="width: 250px; display: block; margin-top: 20px;">
    Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ audio.
  </audio>
</div>
 
 <div id="wheel-container">
    <canvas id="wheel" width="400" height="400"></canvas>
    

    <img id="center-logo" src="logo.png" onclick="spinWheel()" alt="Logo" />
<div id="pointer"></div>
  </div>


  <div class="column right">
    <div id="result-box">
     <center> K·∫æT QU·∫¢ V√íNG QUAY <center/>
      <div id="random-display"></div>
      <div id="random-log" style="margin-top: 15px; font-size: 14px; color: blue;"></div>
    </div>
    
      
<div style="text-align: center; margin-top: 5px;">
  <button onclick="removeLastSpunNumber()" style="background-color:#ff9800;">X√ìA S·ªê ƒê√É QUAY</button>
</div>
<tr>
  <td colspan="2" style="padding-top:10px;">

    <div id="loiChao" style="width: 258px; padding: 10px; background-color: #f9f9f9; border: 1px solid #ddd; border-radius: 10px; text-align: center; font-family: Times New Roman;">
      <div id="dongHoHienTai" style="font-size: 18px; color: green; font-weight: bold; margin-top: 5px;"></div>
<script>
  function capNhatDongHo() {
    const dongHo = document.getElementById("dongHoHienTai");
    const now = new Date();
    const gio = String(now.getHours()).padStart(2, '0');
    const phut = String(now.getMinutes()).padStart(2, '0');
    const giay = String(now.getSeconds()).padStart(2, '0');
    dongHo.textContent = `‚è∞ B√¢y gi·ªù l√†: ${gio}:${phut}:${giay}`;
  }

  setInterval(capNhatDongHo, 1000);
  capNhatDongHo(); // g·ªçi ngay khi trang load
</script>

<center>

        <script type="text/javascript">
          var mydate=new Date();
          var year=mydate.getYear();
          if (year < 1000) year+=1900;
          var day=mydate.getDay();
          var month=mydate.getMonth();
          var daym=mydate.getDate();
          if (daym<10) daym="0"+daym;
          var dayarray=new Array("CH·ª¶ NH·∫¨T","TH·ª® HAI","TH·ª® BA","TH·ª® T∆Ø","TH·ª® NƒÇM","TH·ª® S√ÅU","TH·ª® B·∫¢Y");
          var montharray=new Array("01","02","03","04","05","06","07","08","09","10","11","12");
          document.write("<font color='red' face='Arial' size='2'><b>"+dayarray[day]+",  "+daym+"/"+montharray[month]+"/"+year+"</b></font>");



        </script>
        <script>
          var d = new Date();
          var hourValue = d.getHours();
          var greeting = "", greeting1 = "";
          if (hourValue < 6) { greeting = "Ch√†o ng√†y m·ªõi!"; greeting1 = "Ch√∫c c√°c b·∫°n m·ªôt ng√†y m·ªõi an l√†nh!"; }
          else if (hourValue < 9) { greeting = "Ch√†o bu·ªïi s√°ng!"; greeting1 = "Ch√∫c c√°c b·∫°n m·ªôt bu·ªïi s√°ng t·ªët l√†nh!"; }
          else if (hourValue < 11) { greeting = "S·∫Øp tr∆∞a r·ªìi!"; greeting1 = "Ch√∫c c√°c b·∫°n c√≥ m·ªôt ng√†y th√†nh c√¥ng v√† h·∫°nh ph√∫c!"; }
          else if (hourValue < 13) { greeting = "ƒê√£ bu·ªïi tr∆∞a r·ªìi ƒë√≥!"; greeting1 = "Ch√∫c c√°c b·∫°n c√≥ b·ªØa tr∆∞a th·∫≠t ngon mi·ªáng!"; }
          else if (hourValue < 17) { greeting = "ƒê√£ bu·ªïi chi·ªÅu!"; greeting1 = "H√£y c·ªë g·∫Øng ho√†n th√†nh c√¥ng vi·ªác trong ng√†y!"; }
          else if (hourValue < 18) { greeting = "S·∫Øp t·ªëi r·ªìi!"; greeting1 = "Ch√∫c c√°c b·∫°n c√≥ b·ªØa t·ªëi th·∫≠t ngon mi·ªáng b√™n ng∆∞·ªùi th√¢n!"; }
          else if (hourValue <= 21) { greeting = "Ch√†o bu·ªïi t·ªëi!"; greeting1 = "Ch√∫c c√°c b·∫°n c√≥ b·ªØa t·ªëi th·∫≠t vui v·∫ª v√† h·∫°nh ph√∫c b√™n ng∆∞·ªùi th√¢n!"; }
          else { greeting = "Khuya r·ªìi ƒë·∫•y!"; greeting1 = "H√£y ƒëi ng·ªß th√¥i! Ch√∫c c√°c b·∫°n c√≥ m·ªôt gi·∫•c ng·ªß th·∫≠t ngon!"; }
          document.write("<h3 style='color:#2a2a2a;'>" + greeting + "</h3><p style='font-size:16px; color:blue;'>" + greeting1 + "</p>");
        </script>
      </center>
    </div>
  
  </td>
<button onclick="openNewTab()">M·ªü v√≤ng quay t√™n nh·∫≠p t·ª± do</button>
</tr>


<div id="circleContainer" style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap;"></div>


    </div>

    <!-- B·∫£ng k·∫øt qu·∫£ -->
    <div style="margin-top: 0px; text-align: center;">
<center><button>NH·∫¨T K√ù RANDOM</button></center>
<div style="margin-top: 0px;">
        <button onclick="clearLogTable()" style="background-color:#f44336;">X√≥a to√†n b·ªô</button>
        <button onclick="exportTableToExcel('log-table')" style="background-color:#2196f3;">Xu·∫•t Excel</button>
      </div>
      <table id="log-table" style="margin: 0 auto;">
        <thead>
          <tr>
            <th>L·∫ßn quay</th>
            <th>K·∫øt qu·∫£</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
  </div>

</div>


<script>

  const canvas = document.getElementById("wheel");
  const ctx = canvas.getContext("2d");
  const size = canvas.width;
  const center = size / 2;
  const radius = center - 10;

  let items = Array.from({length: 45}, (_, i) => (i + 1).toString().padStart(2, '0'));
  let colors = items.map(() => "#" + Math.floor(Math.random() * 16777215).toString(16));
  let angle = 0;
  let isSpinning = false;
  let history = [];
  let lastWinnerIndex = null;

  function drawWheelAt(customAngle) {
    const arc = (2 * Math.PI) / items.length;
    ctx.clearRect(0, 0, size, size);
    for (let i = 0; i < items.length; i++) {
      const startAngle = customAngle + i * arc;
      ctx.beginPath();
      ctx.fillStyle = colors[i];
      ctx.moveTo(center, center);
      ctx.arc(center, center, radius, startAngle, startAngle + arc);
      ctx.fill();
      ctx.stroke();
      ctx.save();
      ctx.translate(center, center);
      ctx.rotate(startAngle + arc / 2);
      ctx.fillStyle = "white";
      ctx.font = "bold 18px Arial";
      ctx.textAlign = "right";
      ctx.fillText(items[i], radius - 10, 10);
      ctx.restore();
    }
  }

  function drawWheel() {
    drawWheelAt(angle);
  }

  function spinWheel() {
    if (isSpinning || items.length === 0) return;
    isSpinning = true;
    document.getElementById("result-box").innerText = "N√≠n th·ªü ch·ªù v√†i gi√¢y nh√©! ... ƒêang quay ...";

    const spins = 20;
    const targetExtraAngle = Math.random() * 2 * Math.PI;
    const finalAngle = angle + spins * 2 * Math.PI + targetExtraAngle;
    const duration = 4000;
    let startTime = null;

    function animate(time) {
      if (!startTime) startTime = time;
      const elapsed = time - startTime;
      const progress = Math.min(elapsed / duration, 1);
      const easeOut = 1 - Math.pow(1 - progress, 3);
      const currentAngle = angle + (finalAngle - angle) * easeOut;

      drawWheelAt(currentAngle);

      if (progress < 1) {
        requestAnimationFrame(animate);
      } else {
        isSpinning = false;
        const arc = (2 * Math.PI) / items.length;
        const normalizedAngle = (2 * Math.PI + (0 - (finalAngle % (2 * Math.PI)))) % (2 * Math.PI);
        const winningIndex = Math.floor(normalizedAngle / arc) % items.length;

        const winner = items[winningIndex];
        document.getElementById("result-box").innerHTML = `Okay! Ch√∫c m·ª´ng: <span style="font-size: 100px; color: blue;">"${winner}"</span>`;
        history.push(winner);
        lastWinnerIndex = winningIndex;
        addResultToTable(history.length, winner);
        angle = finalAngle % (2 * Math.PI);
        drawWheel();
      }
    }

    requestAnimationFrame(animate);
  }

  function addResultToTable(index, value) {
    const tableBody = document.querySelector("#log-table tbody");
    const row = document.createElement("tr");
    const col1 = document.createElement("td");
    const col2 = document.createElement("td");
    col1.innerText = `L·∫ßn ${index}`;
    col2.innerText = value;
    row.appendChild(col1);
    row.appendChild(col2);
    tableBody.appendChild(row);
  }

  function clearLogTable() {
    document.querySelector("#log-table tbody").innerHTML = "";
    history = [];
    document.getElementById("result-box").innerText = "K·∫æT QU·∫¢ RANDOM";
  }

  function exportTableToExcel(tableID, filename = 'lich_su_quay.xls') {
    const dataType = 'application/vnd.ms-excel';
    const tableSelect = document.getElementById(tableID);
    const tableHTML = tableSelect.outerHTML.replace(/ /g, '%20');
    const downloadLink = document.createElement("a");
    document.body.appendChild(downloadLink);
    downloadLink.href = 'data:' + dataType + ', ' + tableHTML;
    downloadLink.download = filename;
    downloadLink.click();
    document.body.removeChild(downloadLink);
  }

  function resetAll() {
    items = Array.from({length: 45}, (_, i) => (i + 1).toString().padStart(2, '0'));
    colors = items.map(() => "#" + Math.floor(Math.random() * 16777215).toString(16));
    history = [];
    angle = 0;
    lastWinnerIndex = null;
    clearLogTable();
    drawWheel();
  }

  function generateItemsFromCount() {
    const count = parseInt(document.getElementById("number-count").value);
    if (isNaN(count) || count < 1 || count > 100) {
      alert("Vui l√≤ng nh·∫≠p s·ªë t·ª´ 1 ƒë·∫øn 100");
      return;
    }
    items = [];
    for (let i = 1; i <= count; i++) {
      items.push(i.toString().padStart(2, '0'));
    }
    colors = items.map(() => "#" + Math.floor(Math.random() * 16777215).toString(16));
    drawWheel();
  }

  drawWheel();

  function showInstructions() {
  const infoBox = document.getElementById("info-box");
  if (infoBox.style.display === "block" && infoBox.innerHTML.includes("H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng")) {
    infoBox.style.display = "none";
  } else {
    infoBox.innerHTML = "<strong>H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng V√≤ng quay:</strong><br/><br/>" +
      "1. Nh·∫≠p s·ªë l∆∞·ª£ng ng∆∞·ªùi tham gia v√†o √¥ b√™n tr√°i (t·ªëi ƒëa 100).<br/>" +
      "2. Click v√†o v√≤ng quay ƒë·ªÉ b·∫Øt ƒë·∫ßu quay s·ªë.<br/>" +
      "3. K·∫øt qu·∫£ quay ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü khung b√™n ph·∫£i.<br/>" +
      "4. S·ª≠ d·ª•ng c√°c n√∫t: 'RESET' ho·∫∑c 'F5' ƒë·ªÉ l√†m m·ªõi t·∫•t c·∫£, 'F11' ƒë·ªÉ zoom full m√†n h√¨nh<br/>" +
      "·ª®ng d·ª•ng ƒëang th·ª≠ nghi·ªám v√† ph√°t tri·ªÉn t√πy theo nhu c·∫ßu v√† m·ª•c ƒë√≠ch s·ª≠ d·ª•ng kh√°c nhau, r·∫•t mong s·ª± g√≥p √Ω c·ªßa c√°c b·∫°n!<br/> üéØ Ch√∫c b·∫°n may m·∫Øn v√† c√≥ tr·∫£i nghi·ªám th√∫ v·ªã!";
    infoBox.style.display = "block";
  }
}


  function showContact() {
  const infoBox = document.getElementById("info-box");
  if (infoBox.style.display === "block" && infoBox.innerHTML.includes("Th√¥ng tin li√™n h·ªá")) {
    infoBox.style.display = "none";
  } else {
    infoBox.innerHTML = "<strong>Th√¥ng tin li√™n h·ªá t√°c gi·∫£:</strong><br/><br/>" +
      "H·ªç t√™n: Mai Thi·ªán Ch√°nh<br/>" +
      "ƒê∆°n v·ªã c√¥ng t√°c: Tr∆∞·ªùng THCS ƒê·ª©c Ph√∫, x√£ Ngh·ªã ƒê·ª©c, t·ªânh L√¢m ƒê·ªìng<br/>" +
      "Email: <a href='mailto:maithienchanh@gmail.com'>maithienchanh@gmail.com</a><br/>" +
      "Phone: 0333.289.379";
    infoBox.style.display = "block";
  }
}


function removeLastSpunNumber() {
  if (lastWinnerIndex !== null && items.length > 0) {
    const removedItem = items.splice(lastWinnerIndex, 1)[0];
    colors.splice(lastWinnerIndex, 1); // x√≥a m√†u t∆∞∆°ng ·ª©ng
    lastWinnerIndex = null;
    drawWheel();
    alert(`ƒê√£ x√≥a s·ªë "${removedItem}" kh·ªèi v√≤ng quay.`);
  } else {
    alert("Kh√¥ng c√≥ s·ªë n√†o ƒë·ªÉ x√≥a ho·∫∑c b·∫°n ch∆∞a quay s·ªë.");
  }
}

 // T·∫°o c√°c ƒë·ªëi t∆∞·ª£ng √¢m thanh
const spinSound = new Audio('spin.mp3');
const cheerSound = new Audio('cheer.mp3');

// Ch∆°i √¢m thanh khi b·∫Øt ƒë·∫ßu quay
function spinWheel() {
  if (isSpinning || items.length === 0) return;
  isSpinning = true;

  spinSound.play(); // <-- PH√ÅT √ÇM THANH KHI B·∫ÆT ƒê·∫¶U

  document.getElementById("result-box").innerText = "N√≠n th·ªü ch·ªù v√†i gi√¢y nh√©! ... ƒêang quay ...";

  const spins = 20;
  const targetExtraAngle = Math.random() * 2 * Math.PI;
  const finalAngle = angle + spins * 2 * Math.PI + targetExtraAngle;
  const duration = 4000;
  let startTime = null;

  function animate(time) {
    if (!startTime) startTime = time;
    const elapsed = time - startTime;
    const progress = Math.min(elapsed / duration, 1);
    const easeOut = 1 - Math.pow(1 - progress, 3);
    const currentAngle = angle + (finalAngle - angle) * easeOut;

    drawWheelAt(currentAngle);

    if (progress < 1) {
      requestAnimationFrame(animate);
    } else {
      isSpinning = false;
      const arc = (2 * Math.PI) / items.length;
      const normalizedAngle = (2 * Math.PI + (0 - (finalAngle % (2 * Math.PI)))) % (2 * Math.PI);
      const winningIndex = Math.floor(normalizedAngle / arc) % items.length;

      const winner = items[winningIndex];
      document.getElementById("result-box").innerHTML = `<center>Okay! Ch√∫c m·ª´ng: <br><span style="font-size: 100px; color: blue;">${winner}</span>`;
      history.push(winner);
      lastWinnerIndex = winningIndex;
      addResultToTable(history.length, winner);
      angle = finalAngle % (2 * Math.PI);
      drawWheel();

      cheerSound.play(); // <-- PH√ÅT √ÇM THANH CH√öC M·ª™NG
    }
  }

  requestAnimationFrame(animate);
}

function openNewTab() {
      window.open('vong_quay_ten.html', '_blank'); // M·ªü tab m·ªõi
      window.close(); // ƒê√≥ng tab hi·ªán t·∫°i n·∫øu c√≥ th·ªÉ
    }

</script>

<!-- B·∫Øt ƒë·∫ßu ƒë·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c d·∫°ng ngang -->
<div style="width: 100%; max-width: 700px; margin: 20px auto; padding: 10px; background: #eee; border-radius: 10px;">
  <div style="display: flex; align-items: center; justify-content: space-between; gap: 10px; color: red; font-weight: bold;">
    <label for="timeSelect">Th·ªùi gian ƒë·∫øm ng∆∞·ª£c:</label>
    <select id="timeSelect" style="flex: 1; padding: 6px;"></select>
    <button onclick="startCountdown()" style="
  padding: 10px 20px;
  background-color: #28a745 !important;
  color: white;
  font-weight: bold;
  font-size: 16px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
">
  B·∫Øt ƒë·∫ßu
</button>


    <div id="timer-box" style="flex: 1.2; text-align: center; height: 50px; line-height: 50px; font-size: 24px; font-weight: bold; color: white; border-radius: 8px; background-color: black;">00:00</div>
  </div>
</div>

<!-- Th√™m ph·∫ßn t·ª≠ audio -->
<audio id="alarmSound" src="chuong.mp3" preload="auto"></audio>

<script>
  const timeSelect = document.getElementById("timeSelect");
  const alarmSound = document.getElementById("alarmSound");

  for (let i = 15; i <= 2700; i += 15) {
    const minutes = Math.floor(i / 60);
    const seconds = i % 60;
    let label = "";
    if (minutes > 0) label += `${minutes} ph√∫t`;
    if (seconds > 0) label += ` ${seconds} gi√¢y`;
    timeSelect.innerHTML += `<option value="${i}">${label.trim()}</option>`;
  }

  let countdownInterval;

  function startCountdown() {
    clearInterval(countdownInterval);
    let totalSeconds = parseInt(timeSelect.value);
    const initialSeconds = totalSeconds;
    updateDisplay(totalSeconds, initialSeconds);
    countdownInterval = setInterval(() => {
      totalSeconds--;
      updateDisplay(totalSeconds, initialSeconds);
      if (totalSeconds <= 0) {
        clearInterval(countdownInterval);
        document.getElementById("timer-box").textContent = "H·∫øt gi·ªù!";
        alarmSound.play(); // üîî Ph√°t √¢m thanh
      }
    }, 1000);
  }

  function updateDisplay(secondsLeft, totalSeconds) {
    const minutes = Math.floor(secondsLeft / 60);
    const seconds = secondsLeft % 60;
    const timeStr = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    const percentElapsed = 1 - secondsLeft / totalSeconds;
    const red = Math.floor(255 * percentElapsed);
    const color = `rgb(${red}, 0, 0)`;
    const timerBox = document.getElementById("timer-box");
    timerBox.textContent = timeStr;
    timerBox.style.backgroundColor = color;
  }
</script>

<!-- K·∫øt th√∫c ƒë·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c d·∫°ng ngang -->

<script>
    const playlist = document.getElementById("playlist");
    const audio = document.getElementById("audioPlayer");
    const volumeControl = document.getElementById("volume");

    let queue = [];
    let queueIndex = 0;
    let isAutoPlaying = false;

    audio.volume = volumeControl.value;

    volumeControl.addEventListener("input", () => {
      audio.volume = volumeControl.value;
    });

    function playSelected() {
      const selected = playlist.value;
      if (selected.endsWith(".mp3")) {
        audioPlayer.src = "music/" + selected;
        audioPlayer.play();
      }
    }

    function playAll(shuffle = false) {
      const options = Array.from(playlist.options).slice(1);
      let list = options.map(o => o.value).filter(v => v.endsWith(".mp3"));
      if (shuffle) list.sort(() => Math.random() - 0.5);
      let index = 0;
      function playNext() {
        if (index >= list.length) return;
        audioPlayer.src = "music/" + list[index++];
        audioPlayer.play();
      }
      audioPlayer.onended = playNext;
      playNext();
    }

    function playNextInQueue() {
      if (queueIndex < queue.length) {
        audio.src = queue[queueIndex];
        audio.play();
        queueIndex++;
      } else {
        isAutoPlaying = false;
      }
    }

    audio.addEventListener("ended", () => {
      if (isAutoPlaying) {
        playNextInQueue();
      }
    });

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }
  </script>


<div style="position: fixed; bottom: 20px; right: 20px; z-index: 1001;">
  <button onclick="window.location.href='index.html'" style="background-color: red; color: white; font-weight: bold; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;">
    üè† V·ªÄ TRANG CH·ª¶
  </button>
</div>



<!-- N√∫t to√†n m√†n h√¨nh c·ªë ƒë·ªãnh -->
<div style="
  position: fixed;
  bottom: 20px;
  left: 20px;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 10px;
">
  <button onclick="openFullscreen()" style="
    padding: 10px 16px;
    font-size: 14px;
    background: #00BFFF;
    border: none;
    border-radius: 6px;
    color: white;
    cursor: pointer;
  ">üîç Xem Full m√†n h√¨nh</button>

  <button onclick="exitFullscreen()" style="
    padding: 10px 16px;
    font-size: 14px;
    background: #FF6347;
    border: none;
    border-radius: 6px;
    color: white;
    cursor: pointer;
  ">‚ùå Tho√°t Full m√†n h√¨nh</button>
</div>


<script>
function openFullscreen() {
  const elem = document.documentElement;
  if (elem.requestFullscreen) {
    elem.requestFullscreen();
  } else if (elem.webkitRequestFullscreen) {
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) {
    elem.msRequestFullscreen();
  }
}

function exitFullscreen() {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  } else if (document.webkitExitFullscreen) {
    document.webkitExitFullscreen();
  } else if (document.msExitFullscreen) {
    document.msExitFullscreen();
  }
}
</script>
<script src="chao_name.js"></script>
</body>
</html>
