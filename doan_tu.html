<!-- B·∫ÆT ƒê·∫¶U -->
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
	<script src="auth.js"></script>
  <title>Tr√≤ ch∆°i m·∫£nh gh√©p ch·ªØ c√°i</title>
  <style>
   body {
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 10px;

    background-image: url('Nen2.jpg');
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed;
  }
    h1 {
      color: yellow;
      margin-bottom: 20px;
      font-family: "Times New Roman", Times, serif;
    }
    #inputArea, #controlArea {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
color: #FFD700;
font-weight: bold;
    }
    #slots, #letters {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      min-height: 60px;
      margin-bottom: 20px;
    }
    .slot, .letter {
      width: 50px;
      height: 50px;
      font-size: 24px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px dashed #999;
      background-color: #f0f0f0;
      cursor: pointer;
      user-select: none;
    }
    .letter {
      border: 2px solid #009688;
      background-color: #E0F2F1;
    }
    .correct {
      border-color: green;
      background-color: #C8E6C9;
    }
    .incorrect {
      border-color: red;
      background-color: #FFCDD2;
    }
    button {
      margin: 5px 5px;
      padding: 6px 15px;
      font-size: 16px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
    }
    button:hover {
      background-color: #388E3C;
    }
    select {
      font-size: 16px;
      margin-left: 10px;
    }
    #timer {
      font-size: 18px;
      margin-top: 10px;
      color: red;
      font-weight: bold;
      font-family: "Times New Roman", Times, serif;
    }
    #infoArea {
      font-size: 20px;
      margin-top: 10px;
      font-family: "Times New Roman", Times, serif;
    }
    #infoArea em {
      color: blue;
      font-weight: bold;
      font-style: normal;
    }

.footer-fixed {
  position: fixed;
  bottom: 0;
  left: 50%; /* B·∫Øt ƒë·∫ßu t·ª´ gi·ªØa */
  transform: translateX(-45%); /* L·ªách ph·∫£i nh·∫π t·ª´ gi·ªØa */
  background-color: transparent; /* B·ªè n·ªÅn */
  color: white;
  font-size: 16px;
  padding: 10px 20px;
  z-index: 9999;
  font-family: 'Times New Roman', serif;
}


  .footer-fixed em strong {
    font-style: italic;
    font-weight: bold;
  }
  .footer-fixed em {
    font-style: italic;
    font-weight: normal;
  }
	  button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

  </style>

<link rel="stylesheet" href="menu.css">
</head>
<body>
  <h1>TR√í CH∆†I S·∫ÆP X·∫æP K√ù T·ª∞ TH√ÄNH T·ª™ HO√ÄN CH·ªàNH</h1>

  <div id="inputArea">
    <input id="answerInput" placeholder="Nh·∫≠p ƒë√°p √°n t·ª´ c·∫ßn t√¨m ƒë√∫ng" size="25" />
    <input id="hintInput" placeholder="Nh·∫≠p g·ª£i √Ω cho t·ª´" size="30" />
    <button onclick="hideInput()">·∫®N KHUNG NH·∫¨P</button>
  </div>
  <div id="showInputArea" style="display:none;">
    <button onclick="showInput()">HI·ªÜN L·∫†I KHUNG NH·∫¨P</button>
  </div>

  <div id="controlArea">
    TH·ªúI GIAN GH√âP CH·ªÆ:
    <select id="timeLimit">
  <option value="0">Kh√¥ng gi·ªõi h·∫°n</option>
  <option value="15">15s</option>
  <option value="30">30s</option>
  <option value="45">45s</option>
  <option value="60">60s (1 ph√∫t)</option>
  <option value="75">75s</option>
  <option value="90">90s</option>
  <option value="105">105s</option>
  <option value="120">120s (2 ph√∫t)</option>
  <option value="135">135s</option>
  <option value="150">150s</option>
  <option value="165">165s</option>
  <option value="180">180s (3 ph√∫t)</option>
  <option value="195">195s</option>
  <option value="210">210s</option>
  <option value="225">225s</option>
  <option value="240">240s (4 ph√∫t)</option>
  <option value="255">255s</option>
  <option value="270">270s</option>
  <option value="285">285s</option>
  <option value="300">300s (5 ph√∫t)</option>
</select>

    <button onclick="setupGame()">B·∫ÆT ƒê·∫¶U</button>
    <button onclick="checkAnswer()">KI·ªÇM TRA</button>
    <button id="showAnswerBtn" onclick="showAnswer()">HI·ªÜN ƒê√ÅP √ÅN</button>

  </div>

  <div id="timer"></div>
  <div id="slots"></div>
  <div id="letters"></div>
  <div id="infoArea"></div>

  <audio id="correctSound" src="correct.mp3"></audio>
  <audio id="wrongSound" src="wrong.mp3"></audio>

  <script>
    let answer = '';
    let timer = null;
    let timeLeft = 0;

    function hideInput() {
      document.getElementById('inputArea').style.display = 'none';
      document.getElementById('showInputArea').style.display = 'block';
    }

    function showInput() {
      document.getElementById('inputArea').style.display = 'block';
      document.getElementById('showInputArea').style.display = 'none';
    }
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }
    function setupGame() {
      const rawAnswer = document.getElementById('answerInput').value.toUpperCase().replace(/\s/g, '');
      if (!rawAnswer) return alert('H√£y nh·∫≠p ƒë√°p √°n!');
      answer = rawAnswer;

      const slots = document.getElementById('slots');
      const letters = document.getElementById('letters');
      const timerDisplay = document.getElementById('timer');
      const infoArea = document.getElementById('infoArea');

      slots.innerHTML = '';
      letters.innerHTML = '';
      timerDisplay.textContent = '';
      clearInterval(timer);

      for (let i = 0; i < answer.length; i++) {
        const slot = document.createElement('div');
        slot.className = 'slot';
        slot.ondrop = dropLetter;
        slot.ondragover = allowDrop;
        slot.onclick = removeLetterFromSlot;
        slots.appendChild(slot);
      }

      const charArray = shuffleArray(Array.from(answer));
	charArray.forEach((char, i) => {
        const div = document.createElement('div');
        div.className = 'letter';
        div.textContent = char;
        div.draggable = true;
        div.id = 'letter-' + i;
        div.ondragstart = dragLetter;
        div.ondrop = dropBackToLetters;
        div.ondragover = allowDrop;
        letters.appendChild(div);
      });
window.letterPositions = [];
Array.from(letters.children).forEach((el, index) => {
  window.letterPositions.push({ id: el.id, char: el.textContent, index });
});
      const limit = parseInt(document.getElementById('timeLimit').value);
      if (limit > 0) {
        timeLeft = limit;
        timerDisplay.textContent = 'Th·ªùi gian: ' + timeLeft + 's';
timerDisplay.style.color = 'white';          // <-- m√†u tr·∫Øng ƒë·∫≠m
  timerDisplay.style.fontWeight = 'bold';      // <-- ƒë·∫≠m
        timer = setInterval(() => {
          timeLeft--;
          timerDisplay.textContent = 'Th·ªùi gian: ' + timeLeft + 's';
timerDisplay.style.color = 'white';        // gi·ªØ m√†u tr·∫Øng trong khi ch·∫°y
          if (timeLeft <= 0) {
            clearInterval(timer);
            timerDisplay.textContent = 'H·∫øt gi·ªù!';
timerDisplay.style.color = 'white';      // v·∫´n m√†u tr·∫Øng ƒë·∫≠m khi h·∫øt gi·ªù
      timerDisplay.style.fontWeight = 'bold';
		  document.getElementById('showAnswerBtn').disabled = false;

            Array.from(letters.children).forEach(div => {
              div.draggable = false;
              div.ondragstart = null;
              div.style.cursor = 'default';
            });
            checkAnswer();
          }
        }, 1000);
	      
     } else {
  // ‚úÖ Kh√¥ng gi·ªõi h·∫°n th·ªùi gian ‚Üí b·∫≠t s·∫µn n√∫t "HI·ªÜN ƒê√ÅP √ÅN"
  document.getElementById('showAnswerBtn').disabled = false;
}

    infoArea.innerHTML = `
  <div style="
    border: 2px solid #FFD700;
    border-radius: 12px;
    padding: 10px;
    display: inline-block;
    background-color: rgba(255, 255, 255, 0.85);
    color: #000000;
    font-size: 18px;
text-align: left;
  ">
    <div>üß© S·ªë ch·ªØ c√°i c·ªßa t·ª´ l√†: üëâ <strong>${answer.length}</strong> ch·ªØ c√°i</div>
    <div>üí° G·ª£i √Ω: üëâ <em>${document.getElementById('hintInput').value}</em></div>
  </div>`;

document.getElementById('showAnswerBtn').disabled = true; // <-- Th√™m d√≤ng n√†y ·∫©n hi·ªán n√∫t hi·ªán ƒë√°p √°n

}

    function allowDrop(e) {
      e.preventDefault();
    }

    function dragLetter(e) {
      e.dataTransfer.setData('letter', e.target.textContent);
      e.dataTransfer.setData('id', e.target.id);
    }

    function dropLetter(e) {
  e.preventDefault();
  const letter = e.dataTransfer.getData('letter');
  const id = e.dataTransfer.getData('id');

  if (e.target.textContent !== '') return;

  e.target.textContent = letter;
  e.target.className = 'slot';

  const dragged = document.getElementById(id);
  if (dragged) {
    dragged.style.visibility = 'hidden'; // <-- ch·ªâ ·∫©n ƒëi thay v√¨ x√≥a
    dragged.setAttribute('data-used', 'true'); // ƒë√°nh d·∫•u l√† ƒë√£ d√πng
  }
}


    function dropBackToLetters(e) {
      e.preventDefault();
    }

    function removeLetterFromSlot(e) {
  const slot = e.currentTarget;
  const char = slot.textContent;
  if (!char) return;

  const lettersDiv = document.getElementById('letters');
  const hidden = Array.from(lettersDiv.children).find(
    el => el.textContent === char && el.getAttribute('data-used') === 'true'
  );

  if (hidden) {
    hidden.style.visibility = 'visible';
    hidden.setAttribute('data-used', 'false');
  } else {
    // N·∫øu kh√¥ng t√¨m ƒë∆∞·ª£c ph·∫ßn t·ª≠ ·∫©n, t·∫°o m·ªõi (ph√≤ng h·ªù)
    const newDiv = document.createElement('div');
    newDiv.className = 'letter';
    newDiv.textContent = char;
    newDiv.draggable = true;
    newDiv.id = 'letter-' + Date.now();
    newDiv.ondragstart = dragLetter;
    newDiv.ondrop = dropBackToLetters;
    newDiv.ondragover = allowDrop;
    lettersDiv.appendChild(newDiv);
  }

  slot.textContent = '';
  slot.className = 'slot';
}


    function checkAnswer() {
      const filled = Array.from(document.getElementById('slots').children).map(slot => slot.textContent).join('');
      const correct = filled === answer;
      const sound = document.getElementById(correct ? 'correctSound' : 'wrongSound');
      sound.play();
      Array.from(document.getElementById('slots').children).forEach((slot, i) => {
        slot.className = 'slot ' + (slot.textContent === answer[i] ? 'correct' : 'incorrect');
      });
    }

    function showAnswer() {
      const slots = document.getElementById('slots');
      const letters = document.getElementById('letters');
      const timerDisplay = document.getElementById('timer');
      clearInterval(timer);
      timerDisplay.textContent = '';
      slots.innerHTML = '';
      for (let i = 0; i < answer.length; i++) {
        const slot = document.createElement('div');
        slot.className = 'slot correct';
        slot.textContent = answer[i];
        slot.onclick = removeLetterFromSlot;
        slots.appendChild(slot);
      }
      letters.innerHTML = '';
    }
  </script>

<div class="footer-fixed">  
<span style="font-size: 16px; color: white;">
<em><strong>üë®‚Äçüíª T√°c gi·∫£:</strong></em> Mai Thi·ªán Ch√°nh ‚Äì
    <em>üè´ ƒê∆°n v·ªã c√¥ng t√°c:</em> Tr∆∞·ªùng THCS ƒê·ª©c Ph√∫, x√£ Ngh·ªã ƒê·ª©c, t·ªânh L√¢m ƒê·ªìng
  </span><center></center></div>

<!-- N√∫t c·ªë ƒë·ªãnh c√≥ th·ªÉ k√©o -->
<button class="menu-toggle draggable"><img src="TC.png" alt="Menu" class="menu-icon"></button>
<!-- Overlay -->
<div id="overlay" class="overlay"></div>
<!-- Menu -->
<div id="sideMenu" class="side-menu">
<a href="index.html">üè† Trang ch·ªß</a>
  <a href="vong_quay_so.html">üéØ V√≤ng quay s·ªë</a>
  <a href="vong_quay_ten.html">üë• V√≤ng quay t√™n</a>
  <a href="Ai_la_trieu_phu.html">üí∞ Ai l√† tri·ªáu ph√∫</a>
  <a href="O_Chu_bi_mat.html">üß© T√¨m √î ch·ªØ b√≠ m·∫≠t</a>
  <a href="O_Chu_tron_tim.html">üîç Tinh m·∫Øt t√¨m t·ª´</a>
<a href="doan_tu.html">üî§ Game suy ƒëo√°n t·ª´</a>
  <a href="soan_cau_hoi.html">üìù So·∫°n ƒë·ªÅ TN Tick ch·ªçn + ch·∫•m ƒëi·ªÉm</a>
  <a href="fx-570VN%20Plus.html">üìü Gi·∫£ l·∫≠p Fx-570 + B·∫£ng tu·∫ßn ho√†n NTHH</a>
  <a href="Caro.html">üéÆ Game Caro + Music</a>
  <a href="#" onclick="toggleMenu()">‚ùå ƒê√≥ng Menu</a>

</div>


<!-- N√∫t to√†n m√†n h√¨nh c·ªë ƒë·ªãnh -->
<div style="
  position: fixed;
  bottom: 20px;
  left: 20px;
  z-index: 9999;
  display: flex;
  flex-direction: row;
  gap: 10px;
">
  <button onclick="openFullscreen()" style="
    padding: 10px 16px;
    font-size: 14px;
    background: #00BFFF;
    border: none;
    border-radius: 6px;
    color: white;
    cursor: pointer;
  ">üîç Xem Full m√†n h√¨nh</button>

  <button onclick="exitFullscreen()" style="
    padding: 10px 16px;
    font-size: 14px;
    background: #FF6347;
    border: none;
    border-radius: 6px;
    color: white;
    cursor: pointer;
  ">‚ùå Tho√°t Full m√†n h√¨nh</button>
</div>


<script>
function openFullscreen() {
  const elem = document.documentElement;
  if (elem.requestFullscreen) {
    elem.requestFullscreen();
  } else if (elem.webkitRequestFullscreen) {
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) {
    elem.msRequestFullscreen();
  }
}

function exitFullscreen() {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  } else if (document.webkitExitFullscreen) {
    document.webkitExitFullscreen();
  } else if (document.msExitFullscreen) {
    document.msExitFullscreen();
  }
}
</script>
    <div style="position: fixed; bottom: 20px; right: 20px; z-index: 1001;">
  <button onclick="window.location.href='index.html'" style="background-color: red; color: white; font-weight: bold; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;">
    üè† V·ªÄ TRANG CH·ª¶ </button></div>
</div>
</div>
<script src="chao_name.js"></script>
<script src="menu.js"></script>

</body>
</html>
<!-- K·∫æT TH√öC -->
