<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Thi·∫øt l·∫≠p tr√≤ ch∆°i √¥ ch·ªØ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f2f2f2;
    }
    h2 {
      color: red;
    }
    .section {
  width: 1200px;                /* ƒë·ªìng b·ªô v·ªõi n√∫t v√† √¥ nh·∫≠p */
  margin-bottom: 20px;
  background: #fff;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

    .input-row {
      margin-bottom: 10px;
    }
    .letter-box {
      width: 30px;
      height: 30px;
      text-transform: uppercase;
      text-align: center;
      margin-right: 3px;
    }
    .button-group button {
      margin-right: 10px;
      margin-top: 10px;
    }
    .hint-input {
  width:1200px;
  height: 20px;
  font-size: 14px;
  resize: none;
}

    .guide-text {
      margin-top: 10px;
      font-style: italic;
      color: #333;
    }
    .select-index {
      width: 50px;
      margin-left: 10px;
    }
label {
  display: block;
  margin-bottom: 5px;
}
.inline-label {
  display: inline-block; /* Ri√™ng label S·ªë l∆∞·ª£ng ch·ªØ c√°i: n√†y hi·ªÉn th·ªã c√πng d√≤ng */
  margin-right: 10px;
}
  </style>
</head>
<body>
  <h2>THI·∫æT L·∫¨P TR√í CH∆†I √î CH·ªÆ B√ç M·∫¨T - √î H√ÄNG D·ªåC V√Ä C√ÅC √î H√ÄNG NGANG C·ª¶A TR√í CH∆†I</h2>

  <div class="section">
    <label class="inline-label">√î ch·ªØ h√†ng d·ªçc c·∫ßn t√¨m: S·ªë l∆∞·ª£ng ch·ªØ c√°i:</label>
<input type="number" id="d·ªçc-s·ªë" min="1" max="50">
    <div id="d·ªçc-√¥-ch·ªØ" class="input-row"></div>
    <label>Th√¥ng tin g·ª£i √Ω cho √¥ h√†ng d·ªçc:</label>
    <textarea id="g·ª£i-√Ω-d·ªçc" class="hint-input"></textarea>
    <label>√ù nghƒ©a sau ƒë√£ khi hi·ªÉn th·ªã √¥ h√†ng d·ªçc:</label>
    <textarea id="giai-thich-d·ªçc" class="hint-input"></textarea>
  </div>

  <div id="ngang-container">
    <!-- H√†ng ngang s·∫Ω ƒë∆∞·ª£c sinh ·ªü ƒë√¢y -->
  </div>

    <script>
    let s·ªëH√†ngD·ªçc = 0;
    let h√†ngNgangIndex = 1;

    function t·∫°o√îCh·ªØ(s·ªë, prefix) {
      const container = document.createElement('div');
      for (let i = 0; i < s·ªë; i++) {
        const √¥ = document.createElement('input');
        √¥.type = 'text';
        √¥.maxLength = 1;
        √¥.className = 'letter-box';
        √¥.addEventListener('input', function() {
          this.value = this.value.toUpperCase().replace(/[^A-Z]/g, '');
          if (this.value && this.nextElementSibling) {
            this.nextElementSibling.focus();
          }
        });
        container.appendChild(√¥);
      }
      return container;
    }

    document.getElementById('d·ªçc-s·ªë').addEventListener('change', function() {
      const container = document.getElementById('d·ªçc-√¥-ch·ªØ');
      container.innerHTML = '';
      s·ªëH√†ngD·ªçc = Number(this.value);
      h√†ngNgangIndex = 1;
      document.getElementById('ngang-container').innerHTML = '';
      container.appendChild(t·∫°o√îCh·ªØ(s·ªëH√†ngD·ªçc, 'doc'));
    });

    function th√™mH√†ngNgang() {
      if (h√†ngNgangIndex > s·ªëH√†ngD·ªçc) {
        alert("S·ªë h√†ng ngang kh√¥ng ƒë∆∞·ª£c l·ªõn h∆°n s·ªë ch·ªØ c√°i h√†ng d·ªçc.");
        return;
      }

      const container = document.getElementById('ngang-container');

      const div = document.createElement('div');
      div.className = 'section';

      const label = document.createElement('label');
      label.textContent = `H√†ng ngang th·ª© ${h√†ngNgangIndex}: S·ªë l∆∞·ª£ng ch·ªØ c√°i:`;
      const input = document.createElement('input');
      input.type = 'number';
      input.min = 1;
      input.max = 50;

      const boxContainer = document.createElement('div');
      boxContainer.className = 'input-row';

      const hintLabel = document.createElement('label');
      hintLabel.textContent = 'Th√¥ng tin g·ª£i √Ω:';
      const hintInput = document.createElement('textarea');
      hintInput.className = 'hint-input';

      const guide = document.createElement('div');
      guide.className = 'guide-text';
      guide.innerHTML = 'H√£y ch·ªçn m·ªôt √¥ trong h√†ng ngang n√†y t∆∞∆°ng ·ª©ng th·ª© t·ª± trong h√†ng d·ªçc! [Ch·ªçn √¥ th·ª© ';
      const selectInput = document.createElement('input');
      selectInput.type = 'number';
      selectInput.min = 1;
      selectInput.className = 'select-index';
      guide.appendChild(selectInput);
      guide.appendChild(document.createTextNode(' T·ª´ tr√°i sang]'));

      input.addEventListener('change', function() {
        const sl = Number(this.value);
        boxContainer.innerHTML = '';
        boxContainer.appendChild(t·∫°o√îCh·ªØ(sl, `ngang${h√†ngNgangIndex}`));
        selectInput.max = sl;
      });

      div.appendChild(label);
      div.appendChild(input);
      div.appendChild(boxContainer);
      div.appendChild(hintLabel);
      div.appendChild(document.createElement('br'));
      div.appendChild(hintInput);
      div.appendChild(guide);

      container.appendChild(div);
      h√†ngNgangIndex++;
    }

    function xu·∫•tƒê·ªÅ() {
      const d·ªçc√îs = document.querySelectorAll('#d·ªçc-√¥-ch·ªØ input');
      const d·ªçcT·ª´ = Array.from(d·ªçc√îs).map(o => o.value).join('').toUpperCase();
      const d·ªçcHint = document.getElementById('g·ª£i-√Ω-d·ªçc').value;
      const d·ªçcGiaiThich = document.getElementById('giai-thich-d·ªçc').value;

      let n·ªôiDung = `<h2>ƒê·ªÄ TR√í CH∆†I √î CH·ªÆ H√ÄNG D·ªåC</h2>`;
      n·ªôiDung += `<p>- √î h√†ng d·ªçc: ${d·ªçcT·ª´}</p>`;
      n·ªôiDung += `<p>  + G·ª£i √Ω th√¥ng tin: ${d·ªçcHint}</p>`;
      n·ªôiDung += `<p>  + Gi·∫£i th√≠ch t·ª´ h√†ng d·ªçc: ${d·ªçcGiaiThich}</p>`;

      const c√°cH√†ngNgang = document.querySelectorAll('#ngang-container .section');

      c√°cH√†ngNgang.forEach((div, index) => {
        const h√†ngTh·ª© = index + 1;
        const √¥s = div.querySelectorAll('input.letter-box');
        const t·ª´ = Array.from(√¥s).map(o => o.value).join('').toUpperCase();
        const g·ª£i√ù = div.querySelector('textarea').value;
        const ch·ªâS·ªë = div.querySelector('input.select-index').value;
        const v·ªãTr√≠ = parseInt(ch·ªâS·ªë) - 1;
        const k√ΩT·ª± = v·ªãTr√≠ >= 0 && v·ªãTr√≠ < t·ª´.length ? t·ª´[v·ªãTr√≠] : '';

        n·ªôiDung += `<p>- √î h√†ng ngang th·ª© ${h√†ngTh·ª©}: ${t·ª´}</p>`;
        n·ªôiDung += `<p>  + G·ª£i √Ω th√¥ng tin: ${g·ª£i√ù}</p>`;
        n·ªôiDung += `<p>  + Ch·ªØ c√°i c·∫ßn l·∫•y cho √¥ h√†ng d·ªçc: Ch·ªØ ${k√ΩT·ª±} (√î th·ª© ${ch·ªâS·ªë})</p>`;
      });

      const blob = new Blob([`<html><head><meta charset='UTF-8'><title>ƒê·ªÅ √î Ch·ªØ</title></head><body>${n·ªôiDung}</body></html>`], { type: 'text/html' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'De_O_Chu_hang_doc.html';
      link.click();
    }

    function l∆∞uT·∫°m() {
      alert('D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c l∆∞u t·∫°m');
    }

    function t·∫°oM·ªõi() {
      location.reload();
    }

   function tho√°t() {
  const x√°cNh·∫≠n = confirm(
    'B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën tho√°t kh·ªèi nh·∫≠p li·ªáu kh√¥ng?\n' +
    'M·ªçi d·ªØ li·ªáu ch∆∞a l∆∞u s·∫Ω m·∫•t!\n\n' +
    'Sau khi tho√°t, h√£y v√†o giao di·ªán ch∆°i, ch·ªçn "M·ªü ƒë·ªÅ", ch·ªçn file v·ª´a xu·∫•t ƒë·ªÉ ti·∫øn h√†nh tr√≤ ch∆°i √¥ ch·ªØ b√≠ m·∫≠t.\n' +
    'Ch√∫c b·∫°n tr·∫£i nghi·ªám vui v·∫ª!'
  );
  if (x√°cNh·∫≠n) {
       window.close();
    } 
}
  </script>
<div style="
  position: fixed;
  bottom: 10px;
  right: 20px;
  z-index: 1001;
  display: flex;
  flex-direction: column;
  gap: 10px;
  align-items: flex-end;
">
  <button onclick="th√™mH√†ngNgang()" style="
      background-color: #007BFF;
      color: white;
      font-weight: bold;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      width: 220px;
    ">‚ûï Th√™m h√†ng ngang</button>

  <button onclick="xu·∫•tƒê·ªÅ()" style="
      background-color: #28A745;
      color: white;
      font-weight: bold;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      width: 220px;
    ">üì§ Xu·∫•t ƒë·ªÅ</button>

  <button onclick="l∆∞uT·∫°m()" style="
      background-color: #FFC107;
      color: black;
      font-weight: bold;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      width: 220px;
    ">üíæ L∆∞u t·∫°m</button>

  <button onclick="t·∫°oM·ªõi()" style="
      background-color: #17A2B8;
      color: white;
      font-weight: bold;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      width: 220px;
    ">‚ôªÔ∏è T·∫°o m·ªõi</button>

  <button onclick="tho√°t()" style="
      background-color: #6C757D;
      color: white;
      font-weight: bold;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      width: 220px;
    ">üö™ Tho√°t nh·∫≠p li·ªáu</button>

  <button onclick="window.location.href='index.html'" style="
      background-color: red;
      color: white;
      font-weight: bold;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      width: 220px;
    ">‚ùå V·ªÄ TRANG CH·ª¶</button>
</div>
</body>
</html>
