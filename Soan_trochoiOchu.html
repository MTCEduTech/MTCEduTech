<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nh·∫≠p D·ªØ Li·ªáu Tr√≤ Ch∆°i √î Ch·ªØ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f4f4f4;
      text-align: center;
    }
    input, textarea {
      margin: 5px;
      padding: 10px;
      font-size: 16px;
    }

    textarea {
      height: auto;
      resize: vertical;
      line-height: 1.4;
    }

    #keywordList {
      margin-top: 20px;
    }

    .keyword-item {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 5px;
    }

    .keyword-item input[type="text"] {
      width: 40ch; /* ~50 k√Ω t·ª± ch·ªØ */
      padding: 8px;
      font-size: 16px;
      margin-right: 10px;
    }

    .keyword-item button {
      padding: 6px 10px;
      font-size: 14px;
    }

    #contentForm input, #contentForm textarea {
      width: 80%;
    }

    .disabled {
      pointer-events: none;
      opacity: 0.5;
    }

    /* V·ªã tr√≠ c·ªë ƒë·ªãnh cho c·ª•m n√∫t b√™n ph·∫£i */
    .fixed-buttons {
      position: fixed;
      right: 20px;
      bottom: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 1000;
    }

    .fixed-buttons button {
      padding: 10px 15px;
      font-size: 14px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>NH·∫¨P D·ªÆ LI·ªÜU TR√í CH∆†I T√åM √î CH·ªÆ</h1>
  <div id="contentForm">
    <div>
      <label for="questionPrompt">N·ªôi dung ƒë·ªÅ b√†i:</label><br />
      <textarea id="questionPrompt" rows="1" placeholder="V√≠ d·ª•: H√£y t√¨m c√°c √¥ ch·ªØ trong b·∫£ng sau li√™n quan ƒë·∫øn..."></textarea>
    </div>
    <div class="keyword-item">
      <input type="text" id="keyword1" placeholder="T·ª´ kh√≥a th·ª© nh·∫•t" />
    </div>
    <div id="keywordList"></div>
  </div>

  <!-- C·ª•m n√∫t c·ªë ƒë·ªãnh -->
  <div class="fixed-buttons">
    <button onclick="addKeyword()">‚ûï Th√™m t·ª´ kh√≥a</button>
    <button onclick="saveData()" id="saveButton" class="disabled">üíæ L∆∞u file ƒë·ªÅ</button>
    <button onclick="saveTempData()">üì• L∆∞u t·∫°m</button>
    <button onclick="resetForm()">‚ôªÔ∏è T·∫°o m·ªõi</button>
  </div>

  <script>
    let keywords = [];
    const maxKeywords = 15;

    function addKeyword() {
      if (keywords.length < maxKeywords) {
        const keywordInput = document.createElement("input");
        keywordInput.type = "text";
        keywordInput.placeholder = `T·ª´ kh√≥a th·ª© ${keywords.length + 2}`;
        keywordInput.id = `keyword${keywords.length + 2}`;

        const deleteButton = document.createElement("button");
        deleteButton.innerText = "X√≥a";
        deleteButton.onclick = () => deleteKeyword(keywordInput.id);

        const keywordItem = document.createElement("div");
        keywordItem.classList.add("keyword-item");
        keywordItem.appendChild(keywordInput);
        keywordItem.appendChild(deleteButton);

        document.getElementById("keywordList").appendChild(keywordItem);
        keywords.push(keywordInput);
        checkKeywords();
      } else {
        alert("Kh√¥ng th·ªÉ th√™m qu√° 15 t·ª´ kh√≥a!");
      }
    }

    function deleteKeyword(id) {
      const inputToRemove = document.getElementById(id);
      const index = keywords.findIndex(k => k.id === id);
      if (index !== -1) {
        keywords.splice(index, 1);
      }
      inputToRemove.parentElement.remove();
      checkKeywords();
    }

    function checkKeywords() {
      if (keywords.length > 0) {
        document.getElementById("saveButton").classList.remove("disabled");
      } else {
        document.getElementById("saveButton").classList.add("disabled");
      }
    }

    function saveData() {
      const questionPrompt = document.getElementById("questionPrompt").value.trim();
      if (!questionPrompt || keywords.length === 0) {
        alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß n·ªôi dung ƒë·ªÅ b√†i v√† t·ª´ kh√≥a.");
        return;
      }

      let keywordsList = [];
      keywords.forEach(keyword => {
        const keywordValue = keyword.value.trim();
        if (keywordValue) {
          keywordsList.push(keywordValue);
        }
      });

      // Chuy·ªÉn ƒë·ªïi danh s√°ch t·ª´ kh√≥a th√†nh chu·ªói
      const keywordsString = keywordsList.join(", ");

      // T·∫°o n·ªôi dung file HTML theo m·∫´u y√™u c·∫ßu
      const fileContent = `
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ch·ªß ƒë·ªÅ: ${questionPrompt}</title>
</head>
<body>
  <div id="tieude">Ch·ªß ƒë·ªÅ: ${questionPrompt}</div>
  <div id="tukhoa">${keywordsString}</div>
</body>
</html>
      `;

      const blob = new Blob([fileContent], { type: "text/html" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "Tu_Khoa_O_Chu_Tron_Tim.html";
      link.click();
    }

    function saveTempData() {
      const questionPrompt = document.getElementById("questionPrompt").value.trim();
      if (!questionPrompt || keywords.length === 0) {
        alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß n·ªôi dung ƒë·ªÅ b√†i v√† t·ª´ kh√≥a.");
        return;
      }

      let keywordsList = [];
      keywords.forEach(keyword => {
        const keywordValue = keyword.value.trim();
        if (keywordValue) {
          keywordsList.push(keywordValue);
        }
      });

      alert(`L∆∞u t·∫°m th√†nh c√¥ng!\n\nN·ªôi dung ƒë·ªÅ b√†i: ${questionPrompt}\nT·ª´ kh√≥a: ${keywordsList.join(", ")}`);
    }

    function resetForm() {
      document.getElementById("questionPrompt").value = "";
      document.getElementById("keywordList").innerHTML = "";
      keywords = [];
      document.getElementById("saveButton").classList.add("disabled");
      checkKeywords();
    }
  </script>
<!-- N√∫t Tho√°t Ho√†n To√†n -->
<button id="exitApp" style="
  position: fixed;
  Top: 20px;
  right: 20px;
  background-color: red;
  color: white;
  border: none;
  padding: 10px 18px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
">
  THO√ÅT RA

<script>
document.getElementById('exitApp').addEventListener('click', () => {
  if (confirm("C·∫£m ∆°n b·∫°n ƒë√£ s·ª≠ d·ª•ng ·ª©ng d·ª•ng c·ªßa t√°c gi·∫£ Mai Thi·ªán Ch√°nh\n\nB·∫°n mu·ªën tho√°t ho√†n to√†n?")) {
    window.open('', '_self')?.close(); // C·ªë g·∫Øng ƒë√≥ng tab hi·ªán t·∫°i
    location.href = "about:blank"; // N·∫øu kh√¥ng ƒë∆∞·ª£c, chuy·ªÉn h∆∞·ªõng sang trang tr·∫Øng
  }
});
</script>
</button>

</body>
</html>